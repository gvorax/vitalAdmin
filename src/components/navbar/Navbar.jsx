import React, { useState } from "react";
import { useContext } from "react";
import { Link, useLocation, useParams } from "react-router-dom";
import NavImg from "../../assets/vital_logo.png";
import ProImg from "../../assets/nav_logo.png";
import { UserContext } from "../../context/UseContext";
import ModalProfile from "../Modal/ModalProfile";
import "./NavbarStyle.scss";

const Navbar = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  const {user,signOut} = useContext(UserContext);
  let { pathname } = useLocation();
  const showModal = () => {
    setIsModalOpen(true);
  };


  function linkClasses(type = null) {
    let classes = "navlink";
    if (type === pathname) {
      classes += " active ";
    } else {
      classes += " ";
    }

    return classes;
  }

  return (
    <div className="navbar">
      <div className="navbar_bg">
        <div className="nav_profile">
          <div className="nav_pro_img">
            <img src={ProImg} alt="" />
            <div className="nav_edit" onClick={showModal}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                className="w-6 h-6"
              >
                <path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z" />
              </svg>
            </div>
            <ModalProfile isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen}/>
          </div>
          <h2>{user.name}</h2>
        </div>
        <div className="navbar_item">
          <ul>
            <li>
              <Link to={"/"} className={linkClasses("/")}>
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 28 28"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g id="&#240;&#159;&#166;&#134; icon &#34;Envelope Open&#34;">
                    <path
                      id="Vector"
                      d="M27.0477 8.99697C26.7908 8.78462 20.9378 4.07783 19.6511 3.05479C18.4423 2.08857 16.3755 0 14 0C11.6372 0 9.59022 2.06265 8.34887 3.05479C7.01105 4.11846 1.18098 8.80764 0.957852 8.99106C0.658362 9.23733 0.417143 9.54688 0.251527 9.89746C0.0859109 10.2481 1.09976e-05 10.631 0 11.0187L0 25.375C0 26.8248 1.17523 28 2.625 28H25.375C26.8248 28 28 26.8248 28 25.375V11.02C28 10.6335 27.9146 10.2517 27.75 9.90203C27.5854 9.55231 27.3456 9.24327 27.0477 8.99697ZM25.375 25.0469C25.375 25.1339 25.3404 25.2174 25.2789 25.2789C25.2174 25.3404 25.1339 25.375 25.0469 25.375H2.95312C2.8661 25.375 2.78264 25.3404 2.72111 25.2789C2.65957 25.2174 2.625 25.1339 2.625 25.0469V11.1752C2.625 11.0761 2.66963 10.9824 2.74673 10.9201C3.61462 10.2193 8.69635 6.132 9.98539 5.10721C10.9788 4.31375 12.7093 2.625 14 2.625C15.2957 2.625 17.0547 4.34049 18.0146 5.10721C19.3038 6.13211 24.3859 10.2201 25.2534 10.9214C25.2914 10.9521 25.322 10.991 25.3431 11.0351C25.3641 11.0792 25.375 11.1275 25.375 11.1764V25.0469ZM23.6255 14.7818C23.8579 15.0639 23.815 15.4815 23.5301 15.7105C21.9455 16.9838 20.2885 18.3134 19.6511 18.8202C18.4098 19.8124 16.3628 21.875 14 21.875C11.6237 21.875 9.55462 19.7839 8.34887 18.8202C7.73205 18.3298 6.06599 16.9929 4.47005 15.7104C4.18512 15.4814 4.1423 15.0638 4.37462 14.7817L5.20904 13.7685C5.43752 13.491 5.84653 13.4489 6.12664 13.6741C7.69169 14.9319 9.32947 16.2463 9.98539 16.7678C10.9453 17.5345 12.7043 19.25 14 19.25C15.2907 19.25 17.0213 17.5612 18.0146 16.7678C18.6705 16.2463 20.3084 14.9319 21.8735 13.6742C22.1536 13.4491 22.5626 13.4912 22.7911 13.7687L23.6255 14.7818Z"
                      fill="#585858"
                    />
                  </g>
                </svg>
                Buyurtmalar
              </Link>
            </li>
            <li>
              <Link to={"/users"} className={linkClasses("/users")}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="29"
                  viewBox="0 0 28 29"
                  fill="none"
                >
                  <path
                    d="M19.1988 15.0758C20.5781 13.9906 21.5849 12.5024 22.0791 10.8184C22.5732 9.13432 22.5302 7.33812 21.956 5.67966C21.3818 4.02119 20.305 2.58293 18.8753 1.56498C17.4456 0.547029 15.7342 0 13.9791 0C12.2241 0 10.5127 0.547029 9.08298 1.56498C7.65329 2.58293 6.57644 4.02119 6.00223 5.67966C5.42803 7.33812 5.38502 9.13432 5.8792 10.8184C6.37337 12.5024 7.38016 13.9906 8.75949 15.0758C6.39598 16.0227 4.33374 17.5932 2.79262 19.62C1.25149 21.6467 0.289254 24.0537 0.00848627 26.5843C-0.0118372 26.7691 0.00442949 26.956 0.0563571 27.1345C0.108285 27.313 0.194856 27.4795 0.311129 27.6245C0.545954 27.9174 0.887502 28.1049 1.26064 28.146C1.63378 28.187 2.00793 28.0782 2.30081 27.8433C2.59368 27.6085 2.78127 27.267 2.82231 26.8938C3.13125 24.1436 4.44264 21.6036 6.50592 19.7591C8.5692 17.9146 11.2397 16.895 14.0073 16.895C16.7748 16.895 19.4453 17.9146 21.5086 19.7591C23.5719 21.6036 24.8833 24.1436 25.1922 26.8938C25.2305 27.2395 25.3954 27.5588 25.6553 27.7901C25.9151 28.0213 26.2513 28.1481 26.5991 28.146H26.7539C27.1227 28.1036 27.4598 27.9171 27.6917 27.6272C27.9236 27.3373 28.0315 26.9675 27.992 26.5984C27.7099 24.0606 26.7425 21.6474 25.1934 19.6176C23.6444 17.5877 21.5721 16.0177 19.1988 15.0758ZM13.9791 14.0769C12.8661 14.0769 11.778 13.7468 10.8526 13.1284C9.92711 12.5101 9.2058 11.6311 8.77986 10.6028C8.35392 9.5745 8.24247 8.44297 8.45961 7.35131C8.67676 6.25965 9.21274 5.2569 9.99978 4.46986C10.7868 3.68282 11.7896 3.14684 12.8812 2.92969C13.9729 2.71255 15.1044 2.82399 16.1327 3.24994C17.1611 3.67588 18.04 4.39719 18.6584 5.32265C19.2767 6.24812 19.6068 7.33617 19.6068 8.44921C19.6068 9.94176 19.0139 11.3732 17.9585 12.4286C16.9031 13.484 15.4717 14.0769 13.9791 14.0769Z"
                    fill="#585858"
                  />
                </svg>
                Mijozlar
              </Link>
            </li>
            <li>
              <Link to={"/menu"} className={linkClasses("/menu")}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 28 28"
                  fill="none"
                >
                  <path
                    d="M11.2 15.4H1.4C1.0287 15.4 0.672601 15.5475 0.41005 15.8101C0.1475 16.0726 0 16.4287 0 16.8V26.6C0 26.9713 0.1475 27.3274 0.41005 27.59C0.672601 27.8525 1.0287 28 1.4 28H11.2C11.5713 28 11.9274 27.8525 12.1899 27.59C12.4525 27.3274 12.6 26.9713 12.6 26.6V16.8C12.6 16.4287 12.4525 16.0726 12.1899 15.8101C11.9274 15.5475 11.5713 15.4 11.2 15.4ZM9.8 25.2H2.8V18.2H9.8V25.2ZM26.6 0H16.8C16.4287 0 16.0726 0.1475 15.8101 0.41005C15.5475 0.672601 15.4 1.0287 15.4 1.4V11.2C15.4 11.5713 15.5475 11.9274 15.8101 12.1899C16.0726 12.4525 16.4287 12.6 16.8 12.6H26.6C26.9713 12.6 27.3274 12.4525 27.59 12.1899C27.8525 11.9274 28 11.5713 28 11.2V1.4C28 1.0287 27.8525 0.672601 27.59 0.41005C27.3274 0.1475 26.9713 0 26.6 0ZM25.2 9.8H18.2V2.8H25.2V9.8ZM26.6 15.4H16.8C16.4287 15.4 16.0726 15.5475 15.8101 15.8101C15.5475 16.0726 15.4 16.4287 15.4 16.8V26.6C15.4 26.9713 15.5475 27.3274 15.8101 27.59C16.0726 27.8525 16.4287 28 16.8 28H26.6C26.9713 28 27.3274 27.8525 27.59 27.59C27.8525 27.3274 28 26.9713 28 26.6V16.8C28 16.4287 27.8525 16.0726 27.59 15.8101C27.3274 15.5475 26.9713 15.4 26.6 15.4ZM25.2 25.2H18.2V18.2H25.2V25.2ZM11.2 0H1.4C1.0287 0 0.672601 0.1475 0.41005 0.41005C0.1475 0.672601 0 1.0287 0 1.4V11.2C0 11.5713 0.1475 11.9274 0.41005 12.1899C0.672601 12.4525 1.0287 12.6 1.4 12.6H11.2C11.5713 12.6 11.9274 12.4525 12.1899 12.1899C12.4525 11.9274 12.6 11.5713 12.6 11.2V1.4C12.6 1.0287 12.4525 0.672601 12.1899 0.41005C11.9274 0.1475 11.5713 0 11.2 0ZM9.8 9.8H2.8V2.8H9.8V9.8Z"
                    fill="#585858"
                  />
                </svg>
                Mahsulotlar
              </Link>
            </li>
            <li onClick={()=>signOut()}>
              <Link to={"/login"} className={linkClasses("/login")}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="29"
                  viewBox="0 0 28 29"
                  fill="none"
                >
                  <path
                    d="M9.2 28.0038H4.4C3.84518 28.0274 3.29115 27.9414 2.76962 27.7506C2.24808 27.5599 1.76928 27.2682 1.3606 26.8922C0.951925 26.5162 0.621396 26.0633 0.387928 25.5595C0.15446 25.0556 0.0226367 24.5107 0 23.9558V4.05182C0.0226367 3.49696 0.15446 2.95201 0.387928 2.44815C0.621396 1.94429 0.951925 1.49141 1.3606 1.11543C1.76928 0.739444 2.24808 0.447735 2.76962 0.256992C3.29115 0.0662491 3.84518 -0.0197836 4.4 0.00381631H9.2C9.51826 0.00381631 9.82348 0.130244 10.0485 0.355288C10.2736 0.580332 10.4 0.885557 10.4 1.20382C10.4 1.52208 10.2736 1.8273 10.0485 2.05234C9.82348 2.27739 9.51826 2.40382 9.2 2.40382H4.4C3.92492 2.36251 3.45216 2.50564 3.07978 2.80355C2.70741 3.10145 2.46398 3.53125 2.4 4.00382V23.9558C2.46398 24.4284 2.70741 24.8582 3.07978 25.1561C3.45216 25.454 3.92492 25.5971 4.4 25.5558H9.2C9.51826 25.5558 9.82348 25.6822 10.0485 25.9073C10.2736 26.1323 10.4 26.4376 10.4 26.7558C10.4 27.0741 10.2736 27.3793 10.0485 27.6043C9.82348 27.8294 9.51826 27.9558 9.2 27.9558V28.0038Z"
                    fill="#585858"
                  />
                  <path
                    d="M20.3999 21.6038C20.2422 21.6046 20.086 21.5738 19.9403 21.5134C19.7947 21.4529 19.6626 21.364 19.5519 21.2518C19.3271 21.0268 19.2009 20.7218 19.2009 20.4038C19.2009 20.0858 19.3271 19.7808 19.5519 19.5558L25.1039 14.0038L19.5519 8.45182C19.434 8.34196 19.3394 8.20948 19.2738 8.06228C19.2082 7.91508 19.173 7.75618 19.1701 7.59506C19.1673 7.43393 19.1969 7.27388 19.2573 7.12446C19.3176 6.97504 19.4074 6.83931 19.5214 6.72536C19.6353 6.61141 19.7711 6.52158 19.9205 6.46122C20.0699 6.40087 20.23 6.37123 20.3911 6.37407C20.5522 6.37692 20.7111 6.41218 20.8583 6.47777C21.0055 6.54336 21.138 6.63792 21.2479 6.75582L27.6479 13.1558C27.8726 13.3808 27.9988 13.6858 27.9988 14.0038C27.9988 14.3218 27.8726 14.6268 27.6479 14.8518L21.2479 21.2518C21.1371 21.364 21.005 21.4529 20.8594 21.5134C20.7137 21.5738 20.5575 21.6046 20.3999 21.6038Z"
                    fill="#585858"
                  />
                  <path
                    d="M26.8 15.2038H9.2C8.88174 15.2038 8.57652 15.0774 8.35147 14.8523C8.12643 14.6273 8 14.3221 8 14.0038C8 13.6856 8.12643 13.3803 8.35147 13.1553C8.57652 12.9302 8.88174 12.8038 9.2 12.8038H26.8C27.1183 12.8038 27.4235 12.9302 27.6485 13.1553C27.8736 13.3803 28 13.6856 28 14.0038C28 14.3221 27.8736 14.6273 27.6485 14.8523C27.4235 15.0774 27.1183 15.2038 26.8 15.2038Z"
                    fill="#585858"
                  />
                </svg>
                Tizimdan chiqish
              </Link>
            </li>
          </ul>
        </div>
        <div className="nav_logo">
          <img src={NavImg} alt="" />
        </div>
      </div>
    </div>
  );
};

export default Navbar;
